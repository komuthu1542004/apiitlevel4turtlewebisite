<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="device-width, initial-scale=1.0">
    <title>Turtle Conservation Project - Buy Tickets</title>
    <link rel="stylesheet" href="Payments.css">
    <script src="Tickets.js" defer></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Maven+Pro&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://kit.fontawesome.com/ee8e74c256.js" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/e8fa2e31b4.js" crossorigin="anonymous"></script>
</head>    
<body>
<!-------------------------Menu bar------------------------->

    <section class="header">
        <nav>
            <img src="images/logo3.jpg"></a>
            <div class="nav-links" id="navLinks">
                <i class="fa fa-times" onclick="hideMenu()"></i>   
                <ul>  
                    <li><a href="Home.html">Home</a></li>    
                    <li><a href="Hikkaduwa.html">Hikkaduwa Hatchery</a></li>          
                    <li><a href="Tickets.html">Tickets</a></li>
                    <li><a href="Details.html">Details</a></li>
                    <li><a href="Payments.html">Payment</a></li>
                </ul>
            </div>
            <i class="fa fa-bars" onclick="showMenu()"></i>
        </nav>
        <div class="container">
            <div class="center">
                <h1>Payment Details</h1>
                <a href="https://www.shift4shop.com/credit-card-logos.html"><img alt="Credit Card Logos" title="Credit Card Logos" src="https://www.shift4shop.com/images/credit-card-logos/cc-lg-4.png" width="250" height="auto"/></a>
                <hr style="border:1px solid #000; margin: 0 10px;">
    
                <div class="card-details">
                    <form>
                        <p>Card number</p>
                        <div class="c-number" id="c-number">
                            <input id="number" class="cc-number" placeholder="Card number" maxlength="19" required>
                            <i class="fa-solid fa-credit-card" style="margin: 0;"></i>
                        </div>
    
                        <div class="c-details">
                            <div>
                                <p>Expiry date</p>
                                <input id="e-date" class="cc-exp" placeholder="MM/YY" required maxlength="5" required>
                            </div>
                            <div>
                                <p>CVV</p>
                                <div class="cvv-box" id="cvv-box">
                                    <input id="cvv" class="cc-cvv" placeholder="***" required maxlength="3" required>
                                    <i class="fa-solid fa-circle-question" title="3 digits on the back of the card" style="cursor: pointer;"></i>
                                </div>
                            </div>
                        </div>
                        <div class="name">
                            <p>Name on the Card</p>
                            <input type="text" placeholder="K . D . Walker" id="name" required>
                        </div>
                        <button>Pay Now</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-------------------------JavaScript for Payment------------------------->

    <script>
        let tColorA = document.getElementById('tColorA'),
        tColorB = document.getElementById('tColorB'),
        tColorC = document.getElementById('tColorC'),
        iconA = document.querySelector('.fa-credit-card'),
        iconB = document.querySelector('.fa-building-columns'),
        iconC = document.querySelector('.fa-wallet'),
        cDetails = document.querySelector('.card-details');


        function doFun(){
        tColorA.style.color = "green";
        tColorB.style.color = "#444";
        tColorC.style.color = "#444";
        iconA.style.color = "green";
        iconB.style.color = "#aaa";
        iconC.style.color = "#aaa";
        cDetails.style.display = "block";
        }
        function doFunA(){
        tColorA.style.color = "#444";
        tColorB.style.color = "green";
        tColorC.style.color = "#444";
        iconA.style.color = "#aaa";
        iconB.style.color = "green";
        iconC.style.color = "#aaa";
        cDetails.style.display = "none";
        }
        function doFunB(){
        tColorA.style.color = "#444";
        tColorB.style.color = "#444";
        tColorC.style.color = "green";
        iconA.style.color = "#aaa";
        iconB.style.color = "#aaa";
        iconC.style.color = "green";
        cDetails.style.display = "none";
        }
        let cNumber = document.getElementById('number');
        cNumber.addEventListener('keyup', function(e){
        let num = cNumber.value;

        let newValue = '';
        num = num.replace(/\s/g, '');
        for(var i = 0; i < num.length; i++) {
        if(i%4 == 0 && i > 0) newValue = newValue.concat(' ');
        newValue = newValue.concat(num[i]);
        cNumber.value = newValue;
        }

        let ccNum = document.getElementById('c-number');
        if(num.length<16){
        ccNum.style.border="1px solid red";
        }else{
        ccNum.style.border="1px solid green";
        }
        });

        let eDate = document.getElementById('e-date');
        eDate.addEventListener('keyup', function( e ){

        let newInput = eDate.value;

        if(e.which !== 8) {
        var numChars = e.target.value.length;
        if(numChars == 2){
        var thisVal = e.target.value;
        thisVal += '/';
        e.target.value = thisVal;
        console.log(thisVal.length)
        }
        }

        if(newInput.length<5){
        eDate.style.border="1px solid red";
        }else{
        eDate.style.border="1px solid green";
        }
        });

        let cvv = document.getElementById('cvv');
        cvv.addEventListener('keyup', function(e){

        let elen = cvv.value;
        let cvvBox = document.getElementById('cvv-box');
        if(elen.length<3){
        cvvBox.style.border="1px solid red";
        }else{
        cvvBox.style.border="1px solid green";
        }
        })

    </script>

    <!-------------------------Summary Table------------------------->

<section class="body"> 
    <div class="summary">
        <h1>Summary Table</h1>
        <table border="1">
            <tr>
                <th>Field</th>
                <th>User Details</th>
            </tr>
            <tr>
                <td>Date of Arrival</td>
                <td id="arriving_date_value"></td>
            </tr>
            <tr>
                <td>Time Duration Reserved</td>
                <td id="stay_duration_value"></td>
            </tr>
            <tr>
                <td>Time Slots Reserved</td>
                <td id="time_slots_value"></td>
            </tr>
            <tr>
                <td>Sri Lankan Adults</td>
                <td id="sl_adults_value"></td>
            </tr>
            <tr>
                <td>Sri Lankan Children</td>
                <td id="sl_child_value"></td>
            </tr>
            <tr>
                <td>Foreigner Adults</td>
                <td id="fr_adults_value"></td>
            </tr>
            <tr>
                <td>Foreigner Children</td>
                <td id="fr_child_value"></td>
            </tr>
            <tr>
                <td>Infants</td>
                <td id="infant_value"></td>
            </tr>
            <tr>
                <td>Total Price</td>
                <td id="total_price_value"></td>
            </tr>
        </table>
        <a href="Confirmation.html"><button type="button" onclick="storageFunction()" value="Continue with Purchase">
            Proceed with the Payment        
        </button></a>
    </div>
</section>

    <!-------------------------JavaScript for Summary Table------------------------->

    <script>
        // Retrieve data from local storage and display in the table
        document.getElementById("arriving_date_value").textContent = localStorage.getItem("arrivingDate");
        document.getElementById("stay_duration_value").textContent = localStorage.getItem("stayDuration");
        document.getElementById("time_slots_value").textContent = JSON.parse(localStorage.getItem("timeSlotArray")).join(", ");
        document.getElementById("sl_adults_value").textContent = localStorage.getItem("SL Adults");
        document.getElementById("sl_child_value").textContent = localStorage.getItem("SL Child");
        document.getElementById("fr_adults_value").textContent = localStorage.getItem("Foreigner Adult");
        document.getElementById("fr_child_value").textContent = localStorage.getItem("Foreigner Child");
        document.getElementById("infant_value").textContent = localStorage.getItem("Infant");
        
        // Display the total price from local storage
        var totalPrice = localStorage.getItem("totalPrice");
        document.getElementById("total_price_value").textContent = "$" +totalPrice;
    </script>


    <!---------------------footer------------------------>
    
    <footer>
        <div class="footer-row">
            <div class="footer-col">
                <img src="images/logo3.jpg" class="logo">
                <p>Join with Turtle Trax Conservation Project to rescue these amazing creatures in Sri Lanka.</p>
            </div>
            <div class="footer-col">
                <h3>Offices <div class="underline"><span></span></div></h3>
                <ul>
                    <li>Hikkaduwa - <i>0112 323 232</i></li>
                    <li>Benthota - <i>0112 424 242</i></li>
                    <li>Kosgoda - <i>0112 929 292</i></li>
                </ul>
                <h3>Social Media<div class="underline"><span></span></div></h3>
                <p class="email"><i class="fa-regular fa-envelope"></i>turtletraxsl@gmail.com</p>
                <p class="facebook"><i class="fa-brands fa-facebook"></i>Turtle Trax Sri Lanka</p>
                <p class="instagram"><i class="fa-brands fa-instagram"></i>Turtle_Trax_SL</p>
            </div>
            <div class="footer-col">
                <h3>Links<div class="underline"><span></span></div></h3>
                <ul>
                    <li><a href="Home.html">Home</a></li>
                    <li><a href="About_us.html">About Us</a></li>
                    <li><a href="Turtle_Species.html">Turtle Species</a></li>
                    <li><a href="Threats_to_turtles.html">Threats to Turtles</a></li>
                    <li><a href="Turtle_Hatcheries.html">Turtle Hatcheries</a></li>
                    <li><a href="Purchase_and_Donate.html">Purchases and Donations</a></li>
                    <li><a href="Hikkaduwa.html">Hikkaduwa Hatchery</a></li>
                    <li><a href="Kosgoda.html">Kosgoda Hatchery</a></li>
                    <li><a href="Benthota.html">Benthota Hatchery</a></li>
                    <li><a href="Tickets.html">Tickets</a></li>
                    <li><a href="Details.html">Details</a></li>
                    <li><a href="Payments.html">Payments</a></li>
                    <li><a href="Confirmation.html">Confirmation</a></li>

                </ul>
            </div>
            <div class="footer-col">
                <h3>Leagal Organizations<div class="underline"><span></span></div></h3>
                <ul>
                    <li>Department of Wildlife Conservation (DWC)</li>
                    <li>Environment Protection Authority (MEPA)</li> 
                    <Li>Coast Conservation Department (CCD)</Li>
                    <li>Ministry of Environment and Wildlife Resources</li>
                    <li>Sri Lanka Navy Marine Environmental Protection Authority (SLNMEPA)</li>
                </ul>
            </div>
        </div>
        <hr>
        <p class="copyryt">Tutle Trax Sri Lanka © 2023 - All Rights Reserved</p>
    </footer>

<!-------------------------JavaScript for Toggle Menu------------------------->

    <script>
        var navLinks = document.getElementById("navLinks");

        function showMenu()
        {
            navLinks.style.right = "0";
        }
        function hideMenu()
        {
            navLinks.style.right = "-200px";
        }
    </script>
    <script src="Tickets.js"></script>
</body>
</html>